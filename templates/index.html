{% extends "base.html" %}

{% block content %}
<div id="content-wrapper">
	<div id="sidebar">
    <div class="accordion" id="statements_accordion">
      {% for statement in statements %}
        <div class="accordion-group" id="{{statement.slug}}_group">
          <div class="according-heading">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#statements_accordion" href="#{{statement.slug}}_body">
              {{statement.name}}
            </a>
          </div>
          <div class="accordion-body collapse" id="{{statement.slug}}_body">
            <table class="table-striped table-condensed">
              <tbody>
                {% for field in statement.fields %}
                  <tr>
                    <td>{{ field }}</td>
                    <td>x</td>
                    <td>y</td>
                    <td>size</td>
                    <td>color</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      {% endfor %}
    </div>

		<hr>
     	<footer>
        	<p>&copy; Company 2012</p>
      	</footer>
	</div>
	<div id="graph-wrapper">
		<div id="chart_div" style="height:100%;">
      <center><h1><small>Loading...</small></h1></small>
    </div>
	</div>
</div>
{% endblock content %}

{% block scripts %}
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
var app = {};
google.load('visualization', '1', {'packages':['motionchart']});
google.setOnLoadCallback(drawChart);
function drawChart() {
  $.get('/api/example/', function(data){
    console.log(data)
    app.datatable = new google.visualization.DataTable(data, 1);
    console.log(app.datatable);
    var options = {'title':'example'};
    app.chart = new google.visualization.MotionChart(document.getElementById('chart_div'));
    app.chart.draw(app.datatable, {height:$('#chart_div').height(), width:$('#chart_div').width()});
  });
  
}

function redrawChart() {
  app.chart.draw(app.datatable, {height:$('#chart_div').height(), width:$('#chart_div').width()});
}

window.onresize = redrawChart;
</script>
{% endblock scripts %}